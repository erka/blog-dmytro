# Blog

This is the source code for [my personal site](https://dmytro.sh). It is a static site generated by a [Hugo](https://gohugo.io/). The theme is heavily inspired by [Paper Theme](https://github.com/nanxiaobei/hugo-paper)

## License

The source code for this site is licensed under version 3 of the the [GNU General Public Licence](https://gnu.org/licenses/gpl.html). See the `LICENSE` file. The content of the posts is licensed under the [Creative Commons BY SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/) licence.

## Web Fonts

Typekit is used for loading external fonts. Font families currently used on the site:

- "Calluna" serif family with discretionary ligatures enabled is used in headers.

## Syntax highlighting

The blog fully supports user preferred dark/light theme. To support syntax highlighting, two color schemes are generated:

```bash
./scripts/generate_syntax.sh
```

This command will update `themes/kpumuk/assets/syntax.css` with syntax colors for both light and dark themes.

## Hugo version

Hugo version is installed via asdf in `.tool-versions`, and enforced on Netlify via `netlify.toml`. **Update in both places!**

To install [asdf-hugo](https://github.com/nklmilojevic/asdf-hugo) plugin, run:

```bash
asdf plugin add hugo https://github.com/nklmilojevic/asdf-hugo.git

# Get latest Hugo version
asdf latest hugo
```

## Excalidraw diagrams

1. Export `-dark.svg` and `-light.svg` versions of the diagram
2. Embed fonts using `./scripts/embed_svg_fonts.sh`
3. Go to [Nano](https://vecta.io/nano) and minimize both dark and light diagrams (optimizes and removes unnecessary fonts)
4. Embed using `figure` shortcode:

   ```markdown
   {{< figure lightsrc="/images/diagram-light.svg" darksrc="/images/diagram-dark.svg" >}}
   ```

## Twitter Cards

Most of the graphics in the blog should be created in SVG, as it allows scaling for different devices. Unfortunately, Twitter only supports JPG, PNG, WEBP and GIF formats. In order to convert svg to another format, use a CLI conversion tool from Inkscape:

```bash
brew install inkscape --cask
inkscape --export-type=png --export-background="#fffef8" --export-dpi=150 memory-layout-light.svg
```

The image should be referenced in the front matter using **full** path:

```toml
images = ["/blog/on-nginx-client-headers-parsing/memory-layout-light.png"]
```
